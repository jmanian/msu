var AudioPlayer=function(){function t(){e(),n()}function e(){$("#play").on("click",a),$("#next").on("click",function(){$("#nextanim").get(0).beginElement();var t=r();o(t+1)}),$("#prev").on("click",function(){$("#prevanim").get(0).beginElement();var t=r();o(t-1)}),$(".track").on("click",function(){var t=parseInt($(this).data("trackid"));o(t)})}function n(){u.addEventListener("pause",function(){l=!0,clearInterval(d),i()}),u.addEventListener("play",function(){c(),i()}),u.addEventListener("ended",function(){var t=r();t!==g.length-1&&o(t+1)})}function o(t){l=u.paused,t>=g.length?t=0:0>t&&(t=g.length-1),$("[data-curtrack]").attr("data-curtrack",t),$(".track").removeClass("active"),$('[data-trackid="'+t+'"]').addClass("active"),u.src=g[t],u.load(),u.play()}function a(){s()&&f?o(0):s()?u.play():u.pause(),f=!1}function i(){l&&($("#left").attr({from:s()?m.left.to:m.left.from,to:s()?m.left.from:m.left.to}).get(0).beginElement(),$("#right").attr({from:s()?m.right.to:m.right.from,to:s()?m.right.from:m.right.to}).get(0).beginElement())}function c(){var t=$(".audio").outerWidth();d=setInterval(function(){var e=u.currentTime/u.duration*t;$("#buffer").css({"-webkit-transform":"translateX("+e+"px)","-moz-transform":"translateX("+e+"px)","-ms-transform":"translateX("+e+"px)",transform:"translateX("+e+"px)"})},100)}function r(){var t=$("[data-curtrack]").attr("data-curtrack");return parseInt(t)}function s(){return u.paused}var d,u=document.getElementById("html5audio"),l=!0,f=!0,m={left:{from:"15,0 50,25 50,75 15,100",to:"15,10 40,10 40,90, 15,90"},right:{from:"50,25 85,50 85,50, 50,75",to:"60,10 85,10 85,90, 60,90"}},g=["https://res.cloudinary.com/ddkucvkg0/video/upload/v1520636718/steam/blue-apron.mp3","https://res.cloudinary.com/ddkucvkg0/video/upload/v1520636718/steam/guru.mp3","https://res.cloudinary.com/ddkucvkg0/video/upload/v1520636716/steam/spacious.mp3"];return{init:t}}(),ConnectSection=function(){function t(){ScreenData.isSmall||(s.loaded||s.loading||e(),$(window).scroll(function(){c()})),$(window).resize(function(){ScreenData.isSmall?($("#connect").css("height","auto"),$(".connect__content").css("padding","0")):s.loaded||s.loading?r():e()})}function e(){s.loading=!0,$.ajax({url:"https://www.instagram.com/mobilesteamunit/?__a=1",type:"GET",dataType:"json",success:n,error:function(t,e,n){s.loading=!1}})}function n(t){s.data=t,s.loading=!1,s.loaded=!0;try{o()}catch(e){a()}finally{i()}}function o(){for(var t=s.data.graphql.user.edge_owner_to_timeline_media.edges,e=0;e<t.length;e++)s.images.push(t[e].node.thumbnail_src)}function a(){s.images=["https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040658/steam/ig_1.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040658/steam/ig_2.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040658/steam/ig_3.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040658/steam/ig_4.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040659/steam/ig_5.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040658/steam/ig_6.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040658/steam/ig_7.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040659/steam/ig_8.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040659/steam/ig_9.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040659/steam/ig_10.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040659/steam/ig_11.jpg","https://res.cloudinary.com/ddkucvkg0/image/upload/v1521040659/steam/ig_12.jpg"]}function i(){for(var t="",e=0;e<s.images.length;e++){var n=s.images[e];e%6===0&&(0!==e&&(t+="</div>"),e!==s.images.length&&(t+='<div class="steamfeed__row">')),t+='<div class="steamfeed__img"><img src="'+n+'" alt="" /></div>'}$("#steamfeed").append(t),r()}function c(){var t=$(window).scrollTop(),e=$("#steamfeed").offset(),n=e.top+ScreenData.height,o=e.top-ScreenData.height;if(t>=o&&n>t){var a=400/(n-o),i=a*(t-o);$(".steamfeed").css({transform:"translateX("+i+"px)"})}}function r(){var t=(window.innerWidth+340)/6*2+30;$(".connect").css("height",t+"px")}var s={images:[],data:null,loaded:!1,loading:!1};return{init:t,runScrollEffect:c}}(),Nav=function(){function t(){a(),e()}function e(){$(window).scroll(function(){n()}),$(window).resize(function(){a()})}function n(){var t=$(window).scrollTop();switch(!0){case t>=i.top&&!i.visible:i.visible=!0,$("#nav").addClass("active");break;case t<i.top&&i.visible:i.visible=!1,$("#nav").removeClass("active");break;case t>=i.sections.first&&t<i.sections.second&&0!=i.currentSection:o(0);break;case t>=i.sections.second&&t<i.sections.third&&1!=i.currentSection:o(1);break;case t>=i.sections.third&&t<i.sections.fourth&&2!=i.currentSection:o(2);break;case t>=i.sections.fourth&&3!=i.currentSection:o(3)}}function o(t){i.currentSection=t;var e=-40*t;$(".nav__link").removeClass("active"),$('[data-nav-id="'+t+'"]').addClass("active"),$(".nav__links").css({"-webkit-transform":"translateY("+e+"px)","-moz-transform":"translateY("+e+"px)","-ms-transform":"translateY("+e+"px)","-o-transform":"translateY("+e+"px)",transform:"translateY("+e+"px)"})}function a(){i.top=i.sections.first=$("#products").offset().top-50,i.sections.second=$("#testimonials").offset().top-50,i.sections.third=$("#connect").offset().top-50,i.sections.fourth=$("#team").offset().top-50}var i={visible:!1,top:0,sections:{},currentSection:0};return{init:t}}(),ProductsSection=function(){function t(){$(window).scroll(function(){o()}),e()}function e(){$(".trigger-contact").click(function(){var t=$(this).data("selectval");n(),$("#request").val(t)})}function n(t){$("html, body").animate({scrollTop:$("#contact-form").offset().top-50},800)}function o(){var t=$(window).scrollTop(),e=$(".gigs").offset().top-$(window).height()/2,n=$(".music").offset().top-$(window).height()/2,o=$(".jingles").offset().top-$(window).height()/2,a=t>e&&n>=t,i=t>n&&o>=t,c=t>o;switch(!0){case a:$(".products").css("background","#4586ff"),$(".products .product-button").css("color","#4586ff");break;case i:$(".products").css("background","#2ac971"),$(".products .product-button").css("color","#2ac971");break;case c:$(".products").css("background","#147F96"),$(".products .product-button").css("color","#147F96")}}return{init:t}}(),ScreenData=function(){function t(){e(),$(window).resize(function(){e()})}function e(){ScreenData.height=$(window).height(),ScreenData.isSmall=$(window).width()<768,ScreenData.width=$(window).width()}var n=null,o=!1,a=null;return{init:t,height:n,isSmall:o,width:a}}(),TeamSection=function(){function t(){a=document.querySelectorAll(".member"),e(),$(window).resize(function(){e()})}function e(){ScreenData.isSmall&&$(window).scroll(function(){n()})}function n(){for(var t=0;t<a.length;t++){var e=a[t];!$(e).hasClass("hovered")&&e.getBoundingClientRect().top<o()?$(e).addClass("hovered"):$(e).hasClass("hovered")&&e.getBoundingClientRect().top>=o()&&$(e).removeClass("hovered")}}function o(){return ScreenData.height/4}var a;return{init:t}}();$(document).ready(function(){ScreenData.init(),TeamSection.init(),ConnectSection.init(),ProductsSection.init(),AudioPlayer.init(),$("#year").replaceWith((new Date).getFullYear())});